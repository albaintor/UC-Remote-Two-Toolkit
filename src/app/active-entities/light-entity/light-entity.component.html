<div *ngIf="lightEntity" class="flex gap-2 justify-content-center media-card" style="width: 100%;">
  <div class="power-button" [style]="'scale:'+scale" *ngIf="checkFeature(lightEntity, 'toggle')">
    <p-button *ngIf="!isOn()" icon="pi pi-lightbulb"
              [rounded]="true" (click)="powerToggle(lightEntity)"
              size="small" pTooltip="Power toggle" severity="secondary"/>
    <p-button *ngIf="isOn()" icon="pi pi-lightbulb" [rounded]="true" severity="warning"
              (click)="powerToggle(lightEntity)" size="small" pTooltip="Power toggle"/>
  </div>
  <div class="close-button" *ngIf="closable" [style]="'scale:'+scale">
    <p-button icon="pi pi-times" [rounded]="true" (click)="closeEntity()"
              size="small" pTooltip="Close" severity="secondary"/>
  </div>
  <div class="flex-column" style="width: 100%">
    <div class="flex align-content-center justify-content-center card-title"  cdkDragHandle [style]="'text-align:center;scale:'+scale+';margin-left:'+(38*scale)+'px'">
      <ng-container *ngIf="headerTemplate" [ngTemplateOutlet]="headerTemplate"/>
      <ng-container *ngIf="!headerTemplate"><h2>{{websocketService.getEntityName(lightEntity)}}</h2></ng-container>
    </div>
    <div class="flex flex-column" [style]="'width: 100%'">
      <div *ngIf="lightEntity.new_state?.attributes?.brightness && checkFeature(lightEntity, 'dim')"
           class="flex align-items-center justify-content-center" style="width: 100%; height: 100%">
        <app-slider [value]="Math.round(lightEntity!.new_state!.attributes!.brightness!*100/255)" [scale]="scale"
                    [textValue]="'Brightness '+ Math.round(lightEntity!.new_state!.attributes!.brightness!*100/255) + '%'"
                    style="width: 100%; height: 100%" (valueChange)="updateBrightness($event, lightEntity)"
                    [editable]="true" [backgroundStyle]="'linear-gradient(90deg, rgba(38,22,5,0.8596230728619573) 0%, rgba(255,252,224,1) 76%)'"></app-slider>
      </div>
      <div *ngIf="checkFeature(lightEntity, 'color_temperature')"
           class="flex align-items-center justify-content-center" style="width: 100%; height: 100%">
        <app-slider [value]="Math.round(lightEntity!.new_state!.attributes!.color_temperature!)" [scale]="scale"
                    [textValue]="'Temperature '+ Math.round(lightEntity!.new_state!.attributes!.color_temperature!) + '%'"
                    style="width: 100%; height: 100%" (valueChange)="updateColorTemperature($event, lightEntity)"
                    [editable]="true" [backgroundStyle]="'linear-gradient(90deg, rgba(34,193,195,1) 0%, rgba(253,187,45,1) 100%)'"></app-slider>
      </div>
      <div *ngIf="checkFeature(lightEntity, 'color')">
        <p-colorPicker [(ngModel)]="lightColor" [inline]="true" format="hsb" (ngModelChange)="setColor($event)"/>
      </div>
    </div>
  </div>
</div>
