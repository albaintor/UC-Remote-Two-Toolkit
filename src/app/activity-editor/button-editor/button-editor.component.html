<p-toast id="remoteButton"></p-toast>
<p-dialog [header]="'Edit button '+button?.button" [(visible)]="visible" [style]="{width: '50vw', height: '40vw'}" appendTo="body"
          [dismissableMask]="true" [modal]="true" [closeOnEscape]="true" [closable]="true" [responsive]="true">
  <div class="flex flex-wrap gap-3">
    <div class="flex align-items-center" *ngIf="button">
      <p-button icon="pi pi-undo" (onClick)="undoChanges($event)" label="Revert changes"></p-button><br>
    </div>
    <div class="flex align-items-center" *ngIf="button">
      <p-button severity="danger" icon="pi pi-trash" (onClick)="deleteCommand()" label="Delete this command"></p-button><br>
    </div>
  </div>
  <div class="flex flex-wrap gap-3" *ngIf="button">
    <div class="flex align-items-center">
      <h2>Short press</h2>
    </div>
    <div class="flex align-items-center" *ngIf="!button.short_press">
      <p-button icon="pi pi-plus" (onClick)="assignShortPress()" label="Assign short press"></p-button><br>
    </div>
    <ng-container *ngIf="button.short_press">
      <div class="flex align-items-center">
        <label for="entity">Entity</label>
      </div>
      <div class="flex align-items-center">
        <p-dropdown id="entity" [(ngModel)]="selectedEntity" [options]="activityEntities" (ngModelChange)="entitySelected($event)">
          <ng-template pTemplate="selectedItem">
            {{Helper.getEntityName(selectedEntity)}}
          </ng-template>
          <ng-template let-item pTemplate="item">
            {{Helper.getEntityName(item)}} ({{item.entity_id}})
          </ng-template>
        </p-dropdown>
      </div>
      <div class="flex align-items-center">
        <label for="command">Command</label>
      </div>
      <div class="flex align-items-center">
        <p-dropdown id="command" [(ngModel)]="selectedCommand" [options]="entityCommands" (ngModelChange)="commandSelected($event)">
          <ng-template pTemplate="selectedItem">
            {{Helper.getEntityName(selectedCommand)}}
          </ng-template>
          <ng-template let-item pTemplate="item">
            {{Helper.getEntityName(item)}}
          </ng-template>
        </p-dropdown>
      </div>
      <div class="flex align-items-center" *ngIf="button.short_press">
        <p-button icon="pi pi-trash" (onClick)="removeElement(button, 'short_press')" label="Remove short press"></p-button><br>
      </div>
    </ng-container>
  </div>
  <div class="flex flex-wrap gap-3" *ngIf="button">
    <div class="flex align-items-center">
      <h2>Long press</h2>
    </div>
    <div class="flex align-items-center" *ngIf="!button.long_press">
      <p-button icon="pi pi-plus" (onClick)="assignLongPress()" label="Assign long press"></p-button><br>
    </div>
    <ng-container *ngIf="button.long_press">
      <div class="flex align-items-center">
        <label for="entity">Entity</label>
      </div>
      <div class="flex align-items-center">
        <p-dropdown id="entitylong" [(ngModel)]="selectedEntityLong" [options]="activityEntities" (ngModelChange)="entitySelected($event)">
          <ng-template pTemplate="selectedItem">
            {{Helper.getEntityName(selectedEntityLong)}}
          </ng-template>
          <ng-template let-item pTemplate="item">
            {{Helper.getEntityName(item)}} ({{item.entity_id}})
          </ng-template>
        </p-dropdown>
      </div>
      <div class="flex align-items-center">
        <label for="commandlong">Command</label>
      </div>
      <div class="flex align-items-center">
        <p-dropdown id="commandlong" [(ngModel)]="selectedCommandLong" [options]="entityCommandsLong" (ngModelChange)="commandSelectedLong($event)">
          <ng-template pTemplate="selectedItem">
            {{Helper.getEntityName(selectedCommandLong)}}
          </ng-template>
          <ng-template let-item pTemplate="item">
            {{Helper.getEntityName(item)}}
          </ng-template>
        </p-dropdown>
      </div>
      <div class="flex align-items-center" *ngIf="button.long_press">
        <p-button icon="pi pi-trash" (onClick)="removeElement(button, 'long_press')" label="Remove long press"></p-button><br>
      </div>
    </ng-container>
  </div>
</p-dialog>
